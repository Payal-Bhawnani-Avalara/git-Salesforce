<apex:page controller="OrgChartPlus.SM_OCPCustomisations" extensions="OrgChartPlus.SM_OCPHelp" docType="html-5.0" sidebar="false" tabStyle="SM_Config__tab">
    <head>
        <apex:stylesheet value="{!URLFOR($Resource.OrgChartPlus__JQuery, 'css/smoothness/jquery-ui-1.10.4.custom.min.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.OrgChartPlus__SMQuestionSetConfig, 'QuestionSetEditAutoMatch.css')}"/>

        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__JQuery, 'js/jquery-1.11.0.min.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__JQuery, 'js/jquery-ui-1.10.4.custom.min.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__JQuery, 'js/jquery.ui.touch-punch.min.js')}"/>

        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__SMAceEditor, 'ace.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__SMAceEditor, 'ext-chromevox.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__SMAceEditor, 'ext-statusbar.js')}"/>

        <apex:includeScript value="{!URLFOR($Resource.OrgChartPlus__SMQuestionSetConfig, 'QuestionSetEditAutoMatch4.js')}"/>
    </head>

	<table style=" width:100%; padding:0;" cellspacing="0" cellpadding="0" border="0">
		<tr>
			<c:SMConfigBanner Selection="{!pageTitle}"/>
			
			<td style="padding:0 10px; vertical-align:top;'">
				<apex:sectionHeader title="{!pageTitle} Chart Customization" help="{!zipName}/OCPMainFrame.html"/>
	
				<apex:form >
	                <apex:pageBlock mode="detail">
	                    <apex:pageMessages />
	    
	                    <apex:pageBlockButtons >
	                        <apex:commandButton action="{!SaveOCPTest}" value="Check Syntax"/>
	                        <apex:commandButton value="Save" action="{!SaveOCP}"/>
							<apex:commandButton value="Delete" action="{!deleteSelectedObject}" onclick="return confirm('Delete all of the parameterisation for this object.\n\nAre you sure?');"/>
	                        <input type="button" onclick="navigateToUrl('{!$Page.SMConfig}',null,'new');" class="btn" value="Cancel"/>
	                    </apex:pageBlockButtons>

	                    <div class="SMMatchEditor">
	                        <div class="SMRow">
	                            <div class="SMCell" style="padding:0;">
									The OrgChartPlus configuration is a set of JSON parameters. Use the Insert Parameter button to add template parameters that can then be edited.	                            

	                                <div><input type="button" class="btn" value="Insert Field" id="SMInsertField"/></div>
	
	                                <apex:inputTextarea value="{!rules}" style="display:none" styleClass="smJsonText"/>
								</div>

	                            <div class="SMCell" style="width:330px; padding:0 10px;">
	                                <label for="SMFunctionSelector"><strong>Parameters</strong></label><br/>
	                                <select id="SMFunctionSelector" size="1" title="Parameters"></select> <input class="btn" id="SMInsertFunction" title="Insert Parameter" value="Insert" type="button"/>
	                                <div id="SMFunctionText"></div>
	                            </div>
	                        </div>
	                    </div>

	
						<!-- ============================== Begin Ace Editor html ========================== -->
						<div id="smAceContainer">
						    <div class="smEditor" ace-mode="ace/mode/json" ace-theme="ace/theme/textmate" ace-gutter="true"></div>
						    <div class="smAceStatusBar">
						        <span class="statusicons">
						            <a href="#" class="smIncFont" title="Increase font size"><img src="{!URLFOR($Resource.SMQuestionSetConfig, 'Images/Font-Inc.png')}" class="fontIcon"/></a>
						            <a href="#" class="smDcrFont" title="Decrease font size"><img src="{!URLFOR($Resource.SMQuestionSetConfig, 'Images/Font-Dcr.png')}" class="fontIcon"/></a>
						        </span>
						        <span class="statusicons">
						            <a href="#" class="smSearchIcon" title="Search"><img src="{!URLFOR($Resource.SMQuestionSetConfig, 'Images/SM-search.png')}"/></a>
						        </span>
						        <span>
						            <span>Position: Ln</span> <input type="text" class="linePos" value="1"/>
						            <span> Ch</span> <input type="text" class="colPos" value="1"/>
						        </span>
						        <div class="smGenStatus"></div>
						    </div>
						</div>
						<!-- ============================== End Ace Editor html ========================== -->
	
                        <span id="validationStatus">
                            <apex:outputText value="{!autoMatchSuccess}" styleClass="validStyle"/>
                            <apex:outputText value="{!autoMatchError}" styleClass="errorStyle"/>
                        </span>
	
	                    <div id="SMFunctionParams"></div>
	                </apex:pageBlock>
	
	                <div id="SMFieldSelect" class="SMCommonWindow">
	                    <div class="SMPopupBackground"/>
	                    <div class="SMPopup" style="top:20px" role="dialog" aria-labelledby="SMFieldSelectLabel" aria-hidden="true">
	                        <div class="SMPopupTitle">
	                            <div>
	                                <h2 id="SMFieldSelectLabel">Insert Field</h2>
	                            </div>
	                        </div>
	        
	                        <div class="SMEdge">
	                            Select a field, then click Insert. Labels followed by a "&gt;" indicate that there are more fields available.
	                            <div class="SMToolBox">
	                                <div class="SMToolBoxDiv">
	                                    <div class="SMTable">
	                                        <div class="SMRow">
	                                        </div>
	                                    </div>
	                                </div>
	                            </div>
	        
	                            <div class="SMFormButtons">
	                                <input type="button" value="Close" id="SMFieldSelectClose"/>
	                            </div>
	                        </div>
	                    </div>
	                </div>
	    		</apex:form>
			</td>
		</tr>
	</table>

<script type="text/javascript" language="JavaScript">
smInit('OCP', {!getOCPFieldsAsJSON}, {!IF(prefix=='001', 'true', IF(prefix=='006', 'false', 'null'))});
</script>

</apex:page>