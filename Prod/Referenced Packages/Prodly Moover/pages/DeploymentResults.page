<!-- 
*   Purpose     :   This page is the detail page of Deployment Result (Custom Object)
*
*   Created Date    :   

*   Created By      :   Rohit

*   Version         :   V1.0

*   Modified By     :   Romesh Kumar
Description :-  Made UI changes to look Deployment Result page better.
*
*
-->

<apex:page standardController="PDRI__Deployment_Result__c" tabstyle="PDRI__Deployment_Result__c"
           extensions="PDRI.DeploymentResultExtension,PDRI.TrackDataMigrationStatusExt" standardStylesheets="false">
    
    <script src="/soap/ajax/40.0/connection.js"></script>
    <script src="/soap/ajax/40.0/apex.js" type="text/javascript"></script>

    <apex:stylesheet value="{!URLFOR($Resource.PDRI__SLDS080, 'SLDS080/assets/styles/salesforce-lightning-design-system-vf.css')}"/>
    
    <style>
        .Contentt-wrapper {
        width: 100%;
        float: left;
        overflow: auto;
        }
        .apexp .bPageBlock.apexDefaultPageBlock .pbBody {
        margin: 0px !important;
        }
        .relatedListSec{
        float: left;
        width: 100%;
        margin-top: 20px;
        cursor: pointer; /*MD-2706*/
        }
        .deployResult {
        float: left !important;
        margin-top: .5rem !important;
        margin-right: 5px !important;
        }
        .mainBody-lightning-style {
        paddingLeft: 5%;
        paddingRight: 5%;
        }
        .slds .slds-button-group .slds-button:first-child {
        border-left: 1px solid #ccc !important;
        }
        
        /*MD-1463*/
        .slds .slds-page-header {
        padding: 10px 24px 12px;
        border-bottom: 1px solid #d8dde6;
        background: #f4f6f9;
        }
        
        .severtyMsg td:first-child{
        width:26px;
        }
        
        .slds-scope .slds-nubbin--left-top:after, .slds-scope .slds-nubbin--left-top:before, .slds-scope .slds-nubbin_left-top:after, .slds-scope .slds-nubbin_left-top:before {
        top: 1rem;
        }
        /*MD-1701 Start*/
        .deploymentPlanStep {
        float: left;
        width: 100%;
        margin: 0px;
        border-bottom: 1px solid #ccc;
        cursor:pointer !important;
        /*background: #f7f9fb !important;*/
        }
        .plusMinusImage{
        	width: 3%; 
        	float: left; 
        	cursor: pointer;
        }
        .deploymentPlanDetail{
        	width: 97%; 
        	float: left;
        }
        .vertical_top{
        	width:auto; 
        	overflow:hidden"
        }
        /*.slds .slds-section-title--divider:first-child {
        margin-top: 0px;
        margin-left: 0px;
        }*/
        /*MD-1701 End*/
        /*MD-1766*/
        .vertical_top tr td{ vertical-align:top;}
        
        .slds-page-header.slds-scope {
		    padding: 10px 24px 12px;
		    border-bottom: 1px solid #d8dde6;
		    background: #f7f9fb;
		}
		
		.lineHight {
		    line-height: 2.3;
		}
		.borderRemove{
		    border-left: 0px !important;
  			border-right: 0px !important;
		}
		.wordBreak{
			word-break: break-word;
		}
		
		.slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:hover>td, .slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:hover>th, .slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:focus>td, .slds-scope .slds-table:not(.slds-no-row-hover) tbody tr:focus>th {
		    background-color: #f4f6f9 !important;
		}
		
		/*MD-2575 - Start*/
		.message {
		    background-color: #ffc;
		    border-style: solid;
		    border-width: 1px;
		    color: #000;
		    padding: 6px 8px 6px 6px;
		    margin: 4px 20px;
		}
		.infoM6, .infoM4, .infoM3, .infoM2, .infoS1 {
		    border-color: #39f;
		}
		.infoM3 .msgIcon, .infoMedium {
		    background-image: url(/img/msg_icons/info24.png);
		    background-position: 0 0;
		    width: 24px;
		    height: 24px;
		}
		/*MD-2575 - End*/
    </style>
    
    <script>
    //MD-1404 Start
    window.onload = function() {
        //MD-2376
        if('{!$User.UIThemeDisplayed}' == 'Theme3' && (typeof sforce != 'undefined') && sforce && (!!sforce.one))
            window.parent.location.href = '/apex/DeploymentResults?id={!$CurrentPage.parameters.Id}';
        
        //MD-2376
        if((typeof sforce != 'undefined') && sforce && (!!sforce.one)) {
            $(document.body).css('padding-left', '5%');
            $(document.body).css('padding-right', '5%');
        }
    }
    /*MD-1229-Start*/
    function closeToastAndRefresh() {
        //MD-1229
        hardRefreshToastComponent();
    }
    function closeToast() {
        $("#toastMessageDiv").hide();
        var url = window.location.href;
        //MD-1561 url = url.replace('isToastVisible=true','isToastVisible=false');
        window.history.replaceState({}, document.title, url);
    }
    /*MD-1229-End*/
    //MD-1404 End
    var dStatus = '{!DeploymentResultValue.PDRI__Status__c}';
    
    function toggleElementVisibility(obj, isShow) {
        
        if(isShow){
            var msg = $(obj).find("img").attr('alt');
            $(obj).parent().next().children().text(msg);
            $(obj).parent().next().show();
        } else {
            $(obj).parent().next().hide();
        }
        
    }
    //MD-1752
    var dataSetInterval = setInterval(function() {
        var timerFlag = '{!DeploymentResultValue.PDRI__Status__c}';
        if (timerFlag == 'Finished'|| timerFlag == 'Timedout')//MD-2711
            clearInterval(dataSetInterval);
        else
            refreshDataSet();
    }, 5000);
    </script>
    <body>
        <!--MD-1404 Start-->
        <!-- MD-1561 Change the condition -->
        <!-- <apex:outputPanel rendered="{!IF(AND(DeploymentResultValue.Status__c = 'Started',isToastMessageVisible = true),true,false)}"> -->
        <!--MD-2227-->
        <apex:outputPanel id="toastMessageID">
            <apex:outputPanel rendered="{!IF(AND(DeploymentResultValue.PDRI__Status__c = 'Submitted'),true,false)}">
                <div id="toastMessageDiv">
                    <div class="demo-only" style="height: 4rem;">
                        <div class="slds-notify_container slds-is-relative">
                            <div class="slds-notify slds-notify_toast slds-theme_info" role="alert">
                                <span class="slds-assistive-text">info</span>
                                <span class="slds-icon_container slds-icon-utility-info slds-m-right_small slds-no-flex slds-align-top" title="Description of icon when needed">
                                    <div class="slds-icon slds-icon_small">
                                        <img src="{!URLFOR($Resource.SLDS080, 'SLDS080/assets/icons/utility/info_60.png')}" />
                                    </div>
                                </span>
                                <div class="slds-notify__content">
                                    <h2 class="slds-text-heading_small"> {!$Label.DEPLOYMENT_RESULT_TWIST_MESSAGE} <a href="#" onclick="closeToastAndRefresh();">refresh</a></h2>
                                    
                                </div>
                                <button class="slds-button slds-button_icon slds-button_icon-inverse" title="Close" onclick="closeToast()">
                                    <div class="slds-icon slds-icon_small">
                                        <img src="{!URLFOR($Resource.SLDS080, 'SLDS080/assets/icons/utility/close_60.png')}" />
                                    </div>
                                    <span class="slds-assistive-text">Close</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </apex:outputPanel>
        </apex:outputPanel>
        <apex:outputPanel layout="block">
            <div class="slds-panel__section" >
                <div class="slds-form-element slds-hint-parent slds-has-divider--bottom" style="border: 0px; text-align: center;">
                    
                    <apex:form id="mainForm">
                    	<!-- MD-2706 Start -->
                    	<apex:actionFunction name="toggleDeploymentResult" action="{!setDeploymentResultCollapse}" reRender="deploymentResultplusimage,deploymentResultminusimage,deploymentResultSec,deploymentResultHederSec" />
                    	<apex:actionFunction name="toggleDeploymentPlanResult" action="{!setDeploymentPlanResultCollapse}" reRender="deploymentPlanResultplusimage,deploymentPlanResultminusimage,deploymentplansec,deploymentPlanResultHeaderSec" />
                    	<apex:actionFunction name="toggleDeploymentDataSetResult" action="{!setDeploymentDataSetResultCollapse}" reRender="deploymentDataSetResultplusimage,deploymentDataSetResultminusimage,dataSetResultSec,deploymentDataSetResultHeaderSec" />
                    	<!-- MD-2706 End -->
                        <!--MD-1701-->
                        <apex:actionFunction name="toggleDeploymentPlanStep" action="{!setStepResultCollapse}" reRender="deploymentplanstepplusimage,deploymentplanstepminusimage,deployPlanStepResultSec,OuterDeploymentPlanPenel,deploymentPlanStepResultHeaderSec"/>
                        <!--MD-1752--><!--MD-2227--><!-- MD-1892 --><!-- MD-2311 --><!-- MD-2706 -->
                        <apex:actionFunction name="refreshDataSet" action="{!disablePollerFunction}" reRender="toastMessageID,dataSetResultSec,OuterDeploymentPlanPenel,deployPlanStepResultSec,deploymentplansec,deploymentResultSec,mainForm,valMSG,deploymentResultplusimage,deploymentResultminusimage,deploymentPlanResultplusimage,deploymentPlanResultminusimage"/>
                        <!-- MD-1229 Start-->
                        <apex:actionFunction action="{!disablePollerFunction}"  name="hardRefreshToastComponent">
                            <!-- MD-1561 <apex:param name="isToastVisible" value="false"/>  -->
                        </apex:actionFunction>
                        <apex:actionPoller action="{!disablePollerFunction}" enabled="{!pollerRequest}" interval="5"
                                           reRender="mainForm,valMSG" oncomplete="loadPage();" />
                        <apex:actionFunction action="{!refreshCompletePage}" name="hardRefresh" />  
                        <div class="slds-align--absolute-center">
                            <div class="slds-grid">
                                <div class="slds-button-group">
                                    <apex:actionFunction action="{!stopService}" name="stopDeploy"/>
                                    <!--  Command Button -->
                                    <apex:commandButton value="Delete" action="{!deleteDeploymentResult}" status="blockRequest"
                                                        styleClass="slds-button slds-button--neutral"  id="deleteService" reRender="deploymentResult,mainForm,valMSG"/>
                                    <!-- MD-1892 --><!-- MD-2304 -->
                                    <apex:commandButton styleClass="slds-button slds-button--neutral" value="Pause" disabled="{!pollerRequest || DeploymentResultValue.PDRI__Status__c = 'Submitted' || DeploymentResultValue.PDRI__Status__c = 'Queued'}"
                                                        action="{!pauseService}" id="pauseService" status="blockRequest" rendered="{!(NOT(pauseService))}"/>
                                    <apex:commandButton styleClass="slds-button slds-button--neutral" status="blockRequest"
                                                        value="Resume" action="{!resumeService}" id="resumeService" rendered="{!(NOT(resumeService))}" disabled="{!pollerRequest}"/>
                                    <!--MD-1477 Changed rerender condition -->
                                    <!-- MD-1892 --><!-- MD-2304 -->
                                    <apex:commandButton styleClass="slds-button slds-button--neutral" value="Stop" onclick="stopDeployment(); return false;" 
                                                        id="stopService"  rendered="{!(NOT(stopService))}" disabled="{!pollerRequest || DeploymentResultValue.PDRI__Status__c = 'Submitted' || DeploymentResultValue.PDRI__Status__c = 'Queued'}"/>
                                    <apex:commandButton styleClass="slds-button slds-button--neutral"  value="Rerun" action="{!reRun}" 
                                                        id="rerunService" rendered="{!reRunService}" disabled="{!pollerRequest}"/>
                                </div>
                            </div>
                        </div>
                        <script>
                        function stopDeployment() {
                            if (confirm('{!$Label.pdri__confirmation_stop_deployment}'))
                                stopDeploy();
                        }
                        /*MD-1229-Start*/
                        function loadPage() {
                            var chk = '{!pollerRequest}';
                            refreshPage(chk);
                        }
                        /*MD-1229-End*/
                        function refreshPage(chkflag) {
                            if (chkflag == 'false') {
                                hardRefresh();
                            }
                        }
                        </script>
                        <!-- MD-1229 End-->
                    </apex:form>
                </div>
            </div>
        </apex:outputPanel>
        <!--MD-1404 End-->
        <!-- MD-271 Error display one place on page-->
        <!-- MD-1253 Shifted Error message Between button and progress bar -->
        <span class="severtyMsg">
            <apex:pageMessages id="valMSG" />
        </span>
        <apex:outputPanel StyleClass="Contentt-wrapper" layout="block" id="trackDataMigration">
            <apex:include pageName="PDRI__TrackDataMigrationStatus"/>
            <!--   <apex:iframe src="/apex/TrackDataMigrationStatus?id={!$CurrentPage.parameters.id}"/>-->
        </apex:outputPanel>
        <!--MD-1465 Shifted TrackDataMigrationStatus div from rerender block-->
        <apex:outputPanel id="deploymentResult"  layout="block">
        <!-- dataset result section delete from here MD-2706-->
        <!-- Deployment paln result section remoove from here MD-2706 -->
            
            <apex:outputPanel styleClass="relatedListSec" Id="deploymentResultHederSec" onclick="toggleDeploymentResult();"><!-- MD-2706 -->
            	<!-- MD-2706 Start-->
            	<apex:outputPanel layout="block"  id="deploymentResultplusimage" style="display:{!IF(NOT(deploymentResultVisibility), '', 'none')};" onclick="toggleDeploymentResult();">
                	<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                    	<apex:image url="{!$Resource.PDRI__Plus_Image}" />
                	</div>
                </apex:outputPanel> 
               	<apex:outputPanel layout="block"  id="deploymentResultminusimage" style="display:{!IF(deploymentResultVisibility, '', 'none')};" onclick="toggleDeploymentResult();">
               		<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
                    	<apex:image url="{!$Resource.PDRI__Minus_Image}" />
                 	</div> 
                </apex:outputPanel> 
                <!-- MD-2706 End -->
                <div class="slds-page-header slds-scope" role="banner">
                    <!-- MD-2706 <div id="j_id0:theForm:navPanel" class="navigation">
                    <style>
                    .navigation .slds-m-bottom--xx-small{margin-bottom:0px !important;}
                    </style>
                        <nav class="slds-m-bottom--xx-small" role="navigation">
                            <p class="slds-assistive-text" id="bread-crumb-label">You are here:</p>
                            <ol aria-labelledby="bread-crumb-label" class="slds-breadcrumb slds-list--horizontal"> </ol>
                        </nav>
                    </div> -->
                    <div class="slds-grid">
                        <div class="slds-col slds-has-flexi-truncate">
                            <h1 class="slds-text-heading--medium slds-truncate"
                                title="Deployment Result">Deployment Result</h1>
                        </div>
                    </div>
                </div>
                
            </apex:outputPanel>
            <!--MD-1561-->
            <apex:form id="deploymentResultSec" style="display:{!IF(deploymentResultVisibility, '', 'none')};">
                <apex:outputPanel id="detailPage" style="float:left;width:100%;">
                    <div class="slds-panel slds-grid slds-grid--vertical slds-nowrap">
                        <div class="slds-form--stacked slds-grow slds-scrollable--y">
                            <apex:outputPanel id="deploymentResultDetail" layout="block">
                                <!--MD-1229 Start--> 
                                <!-- MD-1331 class "deployResult" added to correct layout -->
                                <!--MD-1460 Start -->
                                <div class="slds-panel__section" id="">
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Deployment Result Name</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.Name}" /></span>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Owner</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.OwnerId}" /></span>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                         style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Data Record Failures</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static"><apex:outPutField label="false"
                                                                                                      value="{!DeploymentResultValue.PDRI__Data_Record_Failures__c}" /></span>
                                        </div>
                                    </div>                                 
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Source Connection</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.PDRI__Source_Connection__c}" /></span>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                         style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Result</span>
                                        <div class="slds-form-element__control">
                                            <!--MD-1404 Start-->
                                            <!-- MD-1766 (remove slds-hide and add display:none) -->
                                            <span class="slds-form-element__static"><apex:outputText value="{!DeploymentResultValue.PDRI__Result_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/></span>
                                            <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 15px;left:35px;background: #fff;display:none;">
                                                <div class="slds-popover__body" style="color: #000;"></div>
                                            </div>
                                            <!--MD-1404 End-->
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                         style="display: inline-block; width: 47%;">
                                        <!-- MD-1577 -->
                                        <span class="slds-form-element__label">Destination Connection</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static"><apex:outPutField label="false"
                                                                                                      value="{!DeploymentResultValue.PDRI__Target_Connection__c}" /></span>
                                        </div>
                                    </div>
                                    <div class="" style="clear:both"></div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult"
                                         style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Status</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static"><apex:outPutField label="false" value="{!DeploymentResultValue.PDRI__Status__c}" /></span>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Created By</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static">
                                                <apex:outPutField label="false" value="{!DeploymentResultValue.CreatedById}" />
                                            </span>
                                        </div>
                                    </div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Error</span>
                                        <div class="slds-form-element__control" style="word-break: break-word;">
                                            <span class="slds-form-element__static"><apex:outPutText label="false" value="{!DeploymentResultValue.PDRI__Error__c}" />&nbsp;</span>
                                        </div>
                                    </div> 
                                    <!-- MD-1331 start -->
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Created Date</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static">
                                                <apex:outPutField label="false" value="{!DeploymentResultValue.CreatedDate}" />
                                            </span>
                                        </div>
                                    </div>
                                    <!-- MD-1404 Start -->  
                                    <div class="slds-form-element slds-hint-parent deployResult" style="display: inline-block; width: 47%;"></div>
                                    <div class="slds-form-element slds-hint-parent slds-has-divider--bottom deployResult" style="display: inline-block; width: 47%;">
                                        <span class="slds-form-element__label">Last Modified Date</span>
                                        <div class="slds-form-element__control">
                                            <span class="slds-form-element__static">
                                                <apex:outPutField label="false" value="{!DeploymentResultValue.LastModifiedDate}" />
                                            </span>
                                        </div>
                                    </div>
                                    <!-- MD-1404 End -->
                                    <!-- MD-1331 End -->
                                </div>
                                <!--MD-1460 End -->
                                <!--MD-1229 End--> 
                            </apex:outputPanel>
                        </div>
                    </div>
                </apex:outputPanel>
            </apex:form>
            <!-- MD-2706 Start -->
                <!--MD-1701 Start-->
        <apex:outputPanel id="OuterDeploymentPlanPenel" >
            <apex:outputPanel rendered="{!deploymentPlanResult != null}">
                
                <apex:outputPanel styleClass="relatedListSec" id="deploymentPlanResultHeaderSec"  ><!-- MD-2706 -->
                	<apex:outputPanel onclick="toggleDeploymentPlanResult();"> <!-- MD-2806 -->
	                	<!-- MD-2706 Start-->
		            	<apex:outputPanel layout="block"  id="deploymentPlanResultplusimage" style="display:{!IF(NOT(deploymentPlanResultVisibility), '', 'none')};" onclick="toggleDeploymentPlanResult();">
		                	<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
		                    	<apex:image url="{!$Resource.PDRI__Plus_Image}" />
		                	</div>
		                </apex:outputPanel> 
		               	<apex:outputPanel layout="block"  id="deploymentPlanResultminusimage" style="display:{!IF(deploymentPlanResultVisibility, '', 'none')};" onclick="toggleDeploymentPlanResult();">
		               		<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
		                    	<apex:image url="{!$Resource.PDRI__Minus_Image}" />
		                 	</div> 
		                </apex:outputPanel> 
		                <!-- MD-2706 End -->
	                    <div class="slds-page-header slds-scope" role="banner">
	                        <!--MD-2706 <div id="j_id0:theForm:navPanel">
	                            <nav class="slds-m-bottom--xx-small" role="navigation">
	                                <p class="slds-assistive-text" id="bread-crumb-label">You are
	                                    here:</p>
	                                <ol aria-labelledby="bread-crumb-label"
	                                    class="slds-breadcrumb slds-list--horizontal">
	                                </ol>
	                            </nav>
	                        </div> -->
	                        <div class="slds-grid">
	                            <div class="slds-col slds-has-flexi-truncate">
	                                <h1 class="slds-text-heading--medium slds-truncate"
	                                    title="Deployment Plan Results">Deployment Plan Results</h1>
	                            </div>
	                        </div>
	                    </div>
                    </apex:outputPanel>
                    <apex:form id="deploymentplansec" style="display:{!IF(deploymentPlanResultVisibility, '', 'none')};" styleClass="lineHight"> 
                        <!-- MD-1766 -->
                        <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" ><!-- MD-1701 -->
                            <thead>
                                <tr class="slds-text-title--caps">
                                    <th scope="col" style="width:10%">
                                        <div class="slds-truncate" title="Deployment Plan Result Name"></div>
                                    </th>
                                    <th scope="col" style="width:40%">
                                        <div class="slds-truncate" title="Data Set">Deployment Plan</div>
                                    </th>
                                    <th scope="col" style="width:10%">
                                        <div class="slds-truncate" title="Result">Result</div>
                                    </th>
                                    <th scope="col" style="width:10%">
                                        <div class="slds-truncate" title="Data Record Failures">Data Record Failures</div>
                                    </th>
                                    <th scope="col" style="width:10%">
                                        <div class="slds-truncate" title="Status">Status</div>
                                    </th>
                                    <th scope="col" style="width:20%">
                                        <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <apex:repeat value="{!deploymentPlanResult}" var="deploymentPlanResult" >
                                    <tr>
                                        <td data-label="Deployment Plan Step Result Name">
                                            <div class="slds-truncate" ><a href="/{!deploymentPlanResult.Id}" target="_blank">View Results</a></div>
                                        </td>  
                                        <td data-label="Deployment Plan" style="max-width: 100px;">
                                            <div class="slds-truncate"><a href="/{!deploymentPlanResult.Deployment_Plan__c}" target="_blank">{!deploymentPlanResult.Deployment_Plan__r.Name}</a>
                                            </div>
                                        </td>
                                        
                                        <td data-label="Deployment Plan Result" >
                                            <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
                                                <div style="margin:0%" >
                                                    <apex:outputText value="{!deploymentPlanResult.PDRI__Result_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                                </div>
                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                    <div class="slds-popover__body" style="color: #000;"></div>
                                                </div>
                                            </div>
                                        </td>
                                        
                                        <td data-label="Deployment Plan Record Result">
                                            <div class="slds-truncate" style="margin-left: 35%;margin-top: 5px;">
                                                <apex:outputText value="{!deploymentPlanResult.PDRI__Data_Record_Failures_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                            </div>
                                            <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:55%;background: #fff;display:none;">
                                                <div class="slds-popover__body" style="color: #000;"></div>
                                            </div>
                                        </td>
                                        
                                        <td data-label="Deployment Plan Status">
                                            <div class="slds-truncate" style="white-space: normal;">{!deploymentPlanResult.Status__c}</div>
                                        </td>
                                        
                                        <td data-label="Deployment Plan Error">
                                            <div class="slds-truncate wordBreak" style="white-space: normal;">{!deploymentPlanResult.Error__c}</div>
                                        </td>
                                    </tr>
                                </apex:repeat>
                            </tbody>
                        </table>
                    </apex:form>
                </apex:outputPanel>
                <!-- MD-2706 Start plan step result -->
                <apex:outputPanel styleClass="relatedListSec" id="deploymentPlanStepResultHeaderSec" ><!-- MD-2706 -->
                	<!-- MD-2706 Start-->
                	<apex:outputPanel onclick="toggleDeploymentPlanStep();"> <!-- MD-2806 -->
	                	<!-- MD-2706 Start-->
			           	<apex:outputPanel layout="block"  id="deploymentplanstepplusimage" style="display:{!IF(NOT(stepResultVisibility), '', 'none')};" onclick="toggleDeploymentPlanStep();">
			               	<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
			                   	<apex:image url="{!$Resource.PDRI__Plus_Image}" />
			               	</div>
			               </apex:outputPanel> 
			              	<apex:outputPanel layout="block"  id="deploymentplanstepminusimage" style="display:{!IF(stepResultVisibility, '', 'none')};" onclick="toggleDeploymentPlanStep();">
			              		<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
			                   	<apex:image url="{!$Resource.PDRI__Minus_Image}" />
			                	</div> 
			               </apex:outputPanel> 
			               <!-- MD-2706 End -->
	                    <div class="slds-page-header slds-scope" role="banner">
	                       <!-- MD-2706 <div id="j_id0:theForm:navPanel">
	                            <nav class="slds-m-bottom--xx-small" role="navigation">
	                                <p class="slds-assistive-text" id="bread-crumb-label">You are
	                                    here:</p>
	                                <ol aria-labelledby="bread-crumb-label"
	                                    class="slds-breadcrumb slds-list--horizontal">
	                                </ol>
	                            </nav>
	                        </div> -->
	                        <div class="slds-grid">
	                            <div class="slds-col slds-has-flexi-truncate">
	                                <h1 class="slds-text-heading--medium slds-truncate"
	                                    title="Deployment Plan Step Results">Deployment Plan Step Results</h1>
	                            </div>
	                        </div>
	                    </div>
                    </apex:outputPanel>
                    <apex:form id="deployPlanStepResultSec" style="display:{!IF(stepResultVisibility, '', 'none')};" > 
	                        <!-- MD-1766 -->
	                        <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" ><!-- MD-1701 -->
	                            <thead>
	                                <tr class="slds-text-title--caps">
	                                    <th scope="col" style="width:10%">
	                                        <div class="slds-truncate" title="Deployment Plan Step Result Name"></div>
	                                    </th>
	                                    <th scope="col" style="width:40%">
	                                        <div class="slds-truncate" title="Deployment Plan Step">Deployment Plan Step</div>
	                                    </th>
	                                    <th scope="col" style="width:10%">
	                                        <div class="slds-truncate" title="Result">Result</div>
	                                    </th>
	                                    <th scope="col" style="width:10%">
	                                        <div class="slds-truncate" title="Data Record Failures">Data Record Failures</div>
	                                    </th>
	                                    <th scope="col" style="width:10%">
	                                        <div class="slds-truncate" title="Status">Status</div>
	                                    </th>
	                                    <th scope="col" style="width:20%">
	                                        <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
	                                    </th>
	                                </tr>
	                            </thead>
	                            
	                            <tbody>
	                                <apex:repeat value="{!deploymentPlanResult.Deployment_Plan_Step_Results__r}" var="deployPlanStepResult" >
	                                    <tr>
	                                        <td data-label="Deployment Plan Step Result Name">
	                                            <div class="slds-truncate" ><a href="/{!deployPlanStepResult.Id}" target="_blank">View Results</a></div>
	                                        </td>
	                                        <td data-label="Deployment Plan Step" style="max-width: 100px;">
	                                            <div class="slds-truncate"><a href="/{!deployPlanStepResult.Deployment_Plan_Step__c}" target="_blank">{!deployPlanStepResult.Deployment_Plan_Step__r.Name}</a>
	                                            </div>
	                                        </td>
	                                        
	                                        <td data-label="Deployment Plan Step Result" >
	                                            <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
	                                                <div style="margin:0%" >
	                                                    <apex:outputText value="{!deployPlanStepResult.PDRI__Result_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
	                                                </div>
	                                                <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
	                                                    <div class="slds-popover__body" style="color: #000;"></div>
	                                                </div>
	                                            </div>
	                                        </td>
	                                        
	                                        <td data-label="Deployment Plan Step Record Result">
	                                            <div class="slds-truncate" style="margin-left: 35%;margin-top: 5px;">
	                                                <apex:outputText value="{!deployPlanStepResult.PDRI__Data_Record_Failures_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
	                                            </div>
	                                            <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:55%;background: #fff;display:none;">
	                                                <div class="slds-popover__body" style="color: #000;"></div>
	                                            </div>
	                                        </td>
	                                        
	                                        <td data-label="Deployment Plan Step Status">
	                                            <div class="slds-truncate" style="white-space: normal;">{!deployPlanStepResult.Status__c}</div>
	                                        </td>
	                                        
	                                        <td data-label="Deployment Plan Step Error">
	                                            <div class="slds-truncate wordBreak" style="white-space: normal;">{!deployPlanStepResult.Error__c}</div>
	                                        </td>
	                                    </tr>
	                                </apex:repeat>
	                            </tbody>
	                            
	                        </table>
	                    </apex:form>
                    <!-- </apex:outputPanel> -->
                </apex:outputPanel>
                <!-- MD-2706 End plan step result-->
            </apex:outputPanel>
            </apex:outputPanel>
            <!--MD-1701 End-->
            <apex:outputPanel styleClass="relatedListSec" id="deploymentDataSetResultHeaderSec" ><!-- MD-2706 -->
            	<apex:outputPanel onclick="toggleDeploymentDataSetResult();"> <!-- MD-2806 -->
	            	<!-- MD-2706 Start-->
	            	<apex:outputPanel layout="block"  id="deploymentDataSetResultplusimage" style="display:{!IF(NOT(deploymentDataSetResultVisibility), '', 'none')};" onclick="toggleDeploymentDataSetResult();">
	                	<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
	                    	<apex:image url="{!$Resource.PDRI__Plus_Image}" />
	                	</div>
	                </apex:outputPanel> 
	               	<apex:outputPanel layout="block"  id="deploymentDataSetResultminusimage" style="display:{!IF(deploymentDataSetResultVisibility, '', 'none')};" onclick="toggleDeploymentDataSetResult();">
	               		<div class="plusMinusImage" style="margin-top:14px; padding-left:1%">
	                    	<apex:image url="{!$Resource.PDRI__Minus_Image}" />
	                 	</div> 
	                </apex:outputPanel> 
	                <!-- MD-2706 End -->
	                <div class="slds-page-header slds-scope" role="banner">
	                   <!-- MD-2706  <div id="j_id0:theForm:navPanel">
	                        <nav class="slds-m-bottom--xx-small" role="navigation">
	                            <p class="slds-assistive-text" id="bread-crumb-label">You are
	                                here:</p>
	                            <ol aria-labelledby="bread-crumb-label"
	                                class="slds-breadcrumb slds-list--horizontal">
	                            </ol>
	                        </nav>
	                    </div>-->
	                    <div class="slds-grid">
	                        <div class="slds-col slds-has-flexi-truncate">
	                            <h1 class="slds-text-heading--medium slds-truncate"
	                                title="Deployment Data Set Results" style="font-size: 1.25rem; color: #16325c;">Deployment Data Set Results</h1>
	                        </div>
	                    </div>
	                </div>
                </apex:outputPanel>  
                <!--MD-1752-->
                <apex:form id="dataSetResultSec" style="display:{!IF(deploymentDataSetResultVisibility, '', 'none')};">
                    <!-- MD-1766 -->
                    <table class="slds-scope slds-table slds-table--bordered slds-table--cell-buffer vertical_top lineHight" ><!-- MD-1701 -->
                        <thead>
                            <tr class="slds-text-title--caps">
                                <th scope="col" style="width:10%">
                                    <!-- MD-1601 -->
                                    <!-- MD-MD-1748 Remove Header -->
                                    <div class="slds-truncate" title="Deployment Data Set Result Name"></div>
                                </th>
                                <th scope="col" style="width:40%">
                                    <div class="slds-truncate" title="Data Set">Data Set</div>
                                </th>
                                <th scope="col" style="width:5%">
                                    <div class="slds-truncate" title="Result">Result</div>
                                </th>
                                <th scope="col" style="width:10%">
                                    <div class="slds-truncate" title="Data Record Failures">Data Record Failures</div>
                                </th>
                                <th scope="col" style="width:5%">
                                    <div class="slds-truncate" title="Status">Status</div>
                                </th>
                                <th scope="col" style="width:20%">
                                    <div class="slds-truncate" style="text-align: center;" title="Error">Error</div>
                                </th>
                                <th scope="col" style="width:10%">
                                    <div class="slds-truncate" style="text-align: center;" title="Error"></div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <!--MD-1752 Comment-->
                            <!--<apex:form >-->   
                            <!--MD-1229 Start--> 
                            <apex:repeat value="{!DeploymentResultValue.Deployment_Data_Set_Results__r}" var="dataSetBatchResult" >
                                <tr>
                                    <td data-label="Deployment Result Name">
                                        <!-- MD-1404 Start -->
                                        <div class="slds-truncate" ><a href="/{!dataSetBatchResult.Id}" target="_blank">View Results</a></div>
                                        <!-- MD-1404 End -->
                                    </td>  
                                    <td data-label="Data Set" style="max-width: 100px;">
                                        <div class="slds-truncate"><a href="/{!dataSetBatchResult.Data_Set__c}" target="_blank">{!dataSetBatchResult.Data_Set__r.Name}</a>
                                        </div>
                                    </td>
                                    
                                    <td data-label="Data Set Result" >
                                        <!--MD-1404 Start-->
                                        <div class="slds-truncate" style="margin-left: 10%;margin-top: 5px;">
                                            <div style="margin:0%" >
                                                <apex:outputText value="{!dataSetBatchResult.PDRI__Result_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                            </div>
                                            <!-- MD-1766 removed slds-hide and add display:none property-->
                                            <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:46px;background: #fff;display:none;">
                                                <div class="slds-popover__body" style="color: #000;"></div>
                                            </div>
                                        </div>
                                    </td>
                                    
                                    <td data-label="Data Set Result">
                                        <!-- MD-1406 added outputfield -->
                                        <div class="slds-truncate" style="margin-left: 35%;margin-top: 5px;">
                                            <apex:outputText value="{!dataSetBatchResult.PDRI__Data_Record_Failures_Icon__c}" escape="false" html-onmouseover="toggleElementVisibility(this, true)" html-onmouseout="toggleElementVisibility(this, false)"/>
                                        </div>
                                        <!-- MD-1766 removed slds-hide and add display:none property-->
                                        <div class="slds-scope slds-popover slds-popover--tooltip slds-nubbin--left-top toggle" role="tooltip" style="position: absolute;top: 2px;left:55%;background: #fff;display:none;">
                                            <div class="slds-popover__body" style="color: #000;"></div>
                                        </div>
                                        <!--MD-1404 End-->
                                    </td>
                                    
                                    <td data-label="Data Set Status">
                                        <div class="slds-truncate" style="white-space: normal;">{!dataSetBatchResult.Status__c}</div>
                                    </td>
                                    
                                    <td data-label="Data Set Error">
                                        <div class="slds-truncate wordBreak" style="white-space: normal;">{!dataSetBatchResult.Error__c}</div>
                                    </td>
                                    
                                    <td data-label="Data Set Error">
                                        <div class="slds-truncate" >
                                            <apex:commandLink action="{!deleteDeploymentResultSet}" value="Del" reRender="valMSG">
                                                <apex:param name="param1" value="{!dataSetBatchResult.Id}" assignTo="{!selectedDataSetId}"/>
                                            </apex:commandLink>
                                        </div>
                                    </td>
                                </tr>
                            </apex:repeat>
                            <!--MD-1752 Comment-->
                            <!--</apex:form>-->
                            <!--MD-1229 End--> 
                        </tbody>
                    </table>
                    <!--MD-1752-->
                </apex:form>
            </apex:outputPanel>
            <!-- MD-2706 End -->
        </apex:outputPanel>
        <!--MD-1404 Start-->
        <apex:outputpanel >
            <apex:actionstatus id="blockRequest">
                <apex:facet name="start">
                    <div class="slds-spinner_container">
                        <div class="slds-spinner slds-spinner--medium">
                            <span class="slds-assistive-text">Loading</span>
                            <div class="slds-spinner__dot-a"></div>
                            <div class="slds-spinner__dot-b"></div>
                        </div>
                    </div>
                </apex:facet>
            </apex:actionstatus>
        </apex:outputpanel>
        <!--MD-1404 End-->
    </body>
</apex:page>