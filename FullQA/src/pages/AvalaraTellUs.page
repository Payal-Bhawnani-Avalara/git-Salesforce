<apex:page showHeader="false" sidebar="false" docType="html-5.0" controller="AvalaraCommunityWizardCtrl">
    <apex:stylesheet value="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

    <style>
        .text-right{
            text-align:right;
        }
        .row{
            margin-bottom:2%;
        }
        .div-left{
            float:left;
            width:27.3333333%;
        }
        .div-right{
            float:right;
            width:70%;
            margin-right: 18px;
            padding-left: 22px;
        }
        @media(min-width:992px){
            .top-margin{
                margin-top:14%;
            }
        }
         @media(min-width:650px) and (max-width:991px){
            .top-margin{
                margin-top:21%;
            }
        }
        @media(max-width:649px){
            .top-margin{
                margin-top:40%;
            }
        }
    </style>
    <script>
        function onstart(){
             $.blockUI({
                 message: '<h1><img src="/img/loading32.gif" /> Just a moment...</h1>',
                 css: { width: '40%', border:'0px solid #C2C0C3',cursor:'wait',backgroundColor:'#fff',opacity:0.9},
                 overlayCSS:  { backgroundColor: '#C2C0C3',opacity:0.9,cursor:'wait'}
             });
        }

        function onstop(){
             $.unblockUI();
        }
    </script>
    <apex:composition template="AvalaraTemplate">
        <apex:define name="body">
            <div class="container" style="margin-top:3%;">
                <apex:form id="form">
                    <apex:pagemessages ></apex:pagemessages>
                        <c:avalaranavigator selected="1" id="navigator" vid="{!versionId}"/>
                    <hr class="top-margin"/>
                    <h4>Step 1:  Tell us about yourself! </h4>

                    <div class="panel panel-primary" style="margin-top:10px;">
                        <div class="panel-heading">
                            <h3 class="panel-title">Select Connector</h3>
                        </div>
                        <div class="panel-body">
                            <center>
                                <apex:selectList value="{!connectorId}" size="1" styleClass="form-control input-sm">
                                    <apex:actionSupport event="onchange" rerender="version,connectorpnl,accpnl,msgPnl" status="status" action="{!selectConnector}" />
                                    <apex:selectOptions value="{!ActiveConnectors}" />
                                </apex:selectList>
                            </center>
                        </div>
                    </div>
                    <apex:outputPanel id="version">
                        <apex:outputPanel layout="block">
                            <div class="panel panel-primary">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Select Version</h3>
                                </div>
                                <div class="panel-body">
                                    <center>
                                        <apex:selectList value="{!versionId}" size="1" styleClass="form-control input-sm">
                                            <apex:actionSupport event="onchange" rerender="msgPnl,accpnl,notepanel,navigator" action="{!selectVersion}" status="status" />
                                            <apex:selectOptions value="{!Versions}"/>
                                        </apex:selectList>
                                    </center>
                                </div>
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>
                    <apex:outputPanel id="msgPnl">
                        <apex:outputPanel layout="block" rendered="{!versionId == ''}">
                            <apex:pageMessage severity="warning" strength="3" Summary="Please select a version to continue"></apex:pageMessage>
                         </apex:outputPanel>
                    </apex:outputPanel>
                    <apex:outputPanel layout="block" rendered="{!!ISBLANK(connectorId)}" id="connectorpnl">
                        <div class="panel panel-warning">
                            <div class="panel-heading">
                                <h3 class="panel-title">Partner Information</h3>
                            </div>
                            <div class="panel-body">
                                <div class="row" style="margin-top:1%;">
                                    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Solution Partner</label>
                                            </div>
                                            <div class="col-xs-5">
                                                {!connector.Solution_Provider__r.Name}
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Contract Signed Date</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <apex:outputField value="{!connector.Contract_Signed_Date__c}" styleClass="form-control input-sm"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Number of clients using your application</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <apex:inputField value="{!connector.TAM_Total_Addressable_Market__c }" styleClass="form-control input-sm"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Tell us about your clients:</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <apex:inputField styleClass="form-control input-sm" value="{!connector.Marketing_Notes__c }"/>
                                            </div>
                                        </div>
                                         <!--
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Client Information:</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <apex:inputField styleClass="form-control input-sm" value="{!connector.BDNotes__c }" style="min-height:110px;"/>
                                            </div>
                                        </div>
                                       
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Do we already have mutual clients?</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <input type="text" class="form-control input-sm"></input>
                                            </div>
                                        </div>
                                        -->
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Primary Business Contact</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <c:AutoCompleteV2 allowClear="true" importJquery="false" labelField="Name" SObject="Contact" valueField="Id" targetField="{!connector.Primary_Business_Contact__c}" whereClause="{!'AccountId =\''+acc.Id + '\''}" style="width:345px;"></c:AutoCompleteV2>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Primary Marketing Contact</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <c:AutoCompleteV2 allowClear="true" importJquery="false" labelField="Name" SObject="Contact" valueField="Id" targetField="{!connector.Primary_Marketing_Contact__c}" whereClause="{!'AccountId =\''+acc.Id + '\''}" style="width:345px;"></c:AutoCompleteV2>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Primary Technical Contact</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <c:AutoCompleteV2 allowClear="true" importJquery="false" labelField="Name" SObject="Contact" valueField="Id" targetField="{!connector.Primary_Technical_Contact__c}" whereClause="{!'AccountId =\''+acc.Id + '\''}" style="width:345px;"></c:AutoCompleteV2>
                                            </div>
                                        </div>
                                         <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <a class="btn btn-sm btn-warning" href="{!IF($Site.Prefix != null,$Site.Prefix,'/apex')}/AvalaraNewUser" target="_blank">
                                                    Add Contact
                                                </a>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Avalara Business Development Manager</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <apex:outputText value="{!acc.BusDevOwner__r.Name}"></apex:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Partner Launch Team Owner</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <apex:outputText value="{!connector.PLT_Owner__r.Name}"></apex:outputText>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Web Address</label>
                                            </div>
                                            <div class="col-xs-5">
                                                {!connector.DSPWebsite__c}
                                            </div>
                                        </div>
                                        <!-- <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Schedule a Kick Off (optional)</label>
                                            </div>
                                            <div class="col-xs-5">
                                                <a class="btn btn-sm btn-warning" href="http://www.meetme.so/AvalaraBizDev" target="_new">
                                                    Book Now
                                                </a>
                                            </div>
                                        </div> -->

                                        <div class="row">
                                            <div class="col-xs-7 text-right">
                                                <label>Managed By</label>
                                            </div>
                                            <div class="col-xs-5">
                                                {!connector.Managed_By__r.Name}
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </apex:outputPanel>
                    <apex:outputPanel layout="block" id="accpnl" rendered="{!!ISBLANK(versionId)}">
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">Account Address Information</h3>
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Billing Street</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.BillingStreet}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Billing City</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.BillingCity}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Billing State/Province</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.BillingState}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                     <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Billing Zip/Postal Code</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.BillingPostalCode}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Billing Country</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.BillingCountry}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Shipping Street</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.ShippingStreet}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Shipping City</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.ShippingCity}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Shipping State/Province</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.ShippingState}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Shipping Zip/Postal Code</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.ShippingPostalCode}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-7 text-right">
                                            <label>Shipping Country</label>
                                        </div>
                                        <div class="col-xs-5">
                                            <apex:inputField value="{!acc.ShippingCountry}" styleClass="form-control input-sm"/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="well well-sm">
                                <div class="row" style="margin-bottom:0%;">
                                    <div class="col-xs-12">
                                        <apex:commandButton value="Save" styleClass="btn btn-sm btn-block btn-success" action="{!updateAccountDetail}" disabled="{!versionId == ''}" status="status" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                 </apex:outputPanel>
                <apex:actionStatus id="status" onstart="onstart();" onstop="onstop();"></apex:actionStatus>
                <apex:actionFunction name="goToTellUs" action="{!saveAndRedirect}" status="status"/>
                <apex:actionFunction name="goToSolutionDetails" action="{!updateAccountDetail}"/>
                <apex:actionFunction name="goToUploadEvidence" action="{!saveRecord}"/>
                <apex:actionFunction name="goToCustomerReference" action="{!uploadAttachment}"/>
             </apex:form>
            </div>
        </apex:define>
        <apex:define name="versionnote"></apex:define>
    </apex:composition>
</apex:page>